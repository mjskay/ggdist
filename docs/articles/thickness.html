<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Thickness scale â€¢ ggdist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Thickness scale">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-93322-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93322-5');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggdist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.3.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/dotsinterval.html">Dots + interval stats and geoms</a></li>
    <li><a class="dropdown-item" href="../articles/freq-uncertainty-vis.html">Frequentist uncertainty visualization</a></li>
    <li><a class="dropdown-item" href="../articles/lineribbon.html">Lineribbon stats and geoms</a></li>
    <li><a class="dropdown-item" href="../articles/slabinterval.html">Slab + interval stats and geoms</a></li>
    <li><a class="dropdown-item" href="../articles/thickness.html">Thickness scale</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mjskay/ggdist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Thickness scale</h1>
                        <h4 data-toc-skip class="author">Matthew
Kay</h4>
            
            <h4 data-toc-skip class="date">2025-04-20</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mjskay/ggdist/blob/HEAD/vignettes/thickness.Rmd" class="external-link"><code>vignettes/thickness.Rmd</code></a></small>
      <div class="d-none name"><code>thickness.Rmd</code></div>
    </div>

    
    
<style type="text/css">
.kable-table table {
  margin-left: 0;
}
img {
  border: none;
}
</style>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes the <code>thickness</code> scale / aesthetic
used by the slab+interval family of geoms and stats in
<code>ggdist</code> (see <code><a href="../articles/slabinterval.html">vignette("slabinterval")</a></code> for more
on that family).</p>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>The following libraries are required to run this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pkg.mitchelloharawild.com/distributional/" class="external-link">distributional</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/ggdist/">ggdist</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="../reference/theme_ggdist.html">theme_ggdist</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-thickness-scale">The <code>thickness</code> scale<a class="anchor" aria-label="anchor" href="#the-thickness-scale"></a>
</h2>
<p>The <code>thickness</code> scale is a positional subscale used by
<code><a href="../reference/geom_slabinterval.html">geom_slabinterval()</a></code> to construct <em>slabs</em>, which are
ribbon-like geometries with a fixed baseline and a height determined by
the <code>thickness</code> aesthetic. The <code>thickness</code> scale
is most typically used via <code><a href="../reference/stat_slabinterval.html">stat_slabinterval()</a></code> and its
derivative stats, which allow you to map distribution functions (like
densities or CDFs) onto the <code>thickness</code> aesthetic.</p>
<p><code>thickness</code> exists as a scale separate from the typical
<code>x</code> and <code>y</code> aesthetics (or even
<code>width</code>/<code>height</code>,
<code>xmin</code>/<code>xmax</code>, or
<code>ymin</code>/<code>ymax</code>) so that it is easy to plot multiple
slabs on the same plot, each with its own separate
<code>thickness</code> subscale. For example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  h <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>, <span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">0</span>, <span class="fl">0</span>,<span class="fl">4</span><span class="op">/</span><span class="fl">3</span>,<span class="fl">4</span><span class="op">/</span><span class="fl">3</span>,<span class="fl">0</span>,  <span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,     <span class="fl">0</span>,<span class="fl">1.25</span>,<span class="fl">1.25</span>,<span class="fl">0</span>, <span class="fl">0</span>,<span class="fl">.5</span>,<span class="fl">.5</span>,<span class="fl">0</span><span class="op">)</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span>, <span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>,<span class="fl">7</span>, <span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">9</span>,<span class="fl">10</span>,     <span class="fl">11</span>,<span class="fl">12</span>,<span class="fl">15</span>,<span class="fl">16</span>, <span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4.2</span>,<span class="fl">5.2</span>,   <span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">12</span>,<span class="fl">13</span><span class="op">)</span>,</span>
<span>  y     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"a"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"d"</span>, <span class="st">"c"</span>, <span class="st">"c"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>  panel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="st">"e"</span>, <span class="st">"e"</span>, <span class="st">"e"</span>, <span class="st">"f"</span>, <span class="st">"f"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>  name  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,    <span class="fl">2</span>, <span class="st">"3a"</span>,<span class="st">"3b"</span>,  <span class="fl">4</span>,   <span class="fl">5</span><span class="op">)</span>,  each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_group</span> <span class="op">=</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, .by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">group</span>, <span class="va">panel</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">group</span>, thickness <span class="op">=</span> <span class="va">h</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_slab.html">geom_slab</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray25"</span>, alpha <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>add <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">panel</span><span class="op">)</span>, labeller <span class="op">=</span> <span class="st">"label_both"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span><span class="st">"geom_slab() with default thickness scaling"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray85"</span><span class="op">)</span>,</span>
<span>    panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray70"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/intro-1.png" width="648"></p>
<p>In the above plot, the values assigned to the <code>thickness</code>
aesthetic are all scaled onto a common scale, and the slabs are
positioned with their baselines at the <code>y</code> value specified
for each slab.</p>
</div>
<div class="section level2">
<h2 id="adjusting-normalization-within-one-geometry">Adjusting normalization within one geometry<a class="anchor" aria-label="anchor" href="#adjusting-normalization-within-one-geometry"></a>
</h2>
<p>The default thickness scaling shown above corresponds to the
<code>normalize = "all"</code> option of <code><a href="../reference/geom_slab.html">geom_slab()</a></code>. It
uses the same scale for all slabs, scaling them according the the
maximum height of the tallest slab.</p>
<p>The <code>normalize</code> parameter provides a set of options that
define a hierarchy of increasingly more specific sets within which to
scale the slabs:</p>
<ul>
<li>
<code>"all"</code> scales according to the maximum over <strong>all
slabs</strong>;</li>
<li>
<code>"panels"</code> scales according to the maximum within each
<strong>panel</strong> (facet);</li>
<li>
<code>"xy"</code> scales according to the maximum within each
<strong>x/y position</strong> within each <strong>panel</strong>;
and</li>
<li>
<code>"groups"</code> scales according to the maximum within each
<strong>group</strong> within each <strong>x/y position</strong> within
each <strong>panel</strong>.</li>
</ul>
<p>The <strong>x/y position</strong> referred to above is the unique
<em>x</em> <strong>or</strong> <em>y</em> position of the slab on its
off-axis. For example, this would be the unique <em>y</em> positions in
the above chart (<code>"a"</code> or <code>"b"</code>), because the
chart is drawn with a horizontal <code>orientation</code>.</p>
<div class="section level3">
<h3 id="normalize-all">
<code>normalize = "all"</code><a class="anchor" aria-label="anchor" href="#normalize-all"></a>
</h3>
<p>We can see how normalization affects the scales by annotating the
previous plot of the default normalization settings:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">subguide_orangered</span> <span class="op">=</span> <span class="fu"><a href="../reference/subguide_axis.html">subguide_outside</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"thickness"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"right"</span>,</span>
<span>  theme <span class="op">=</span> <span class="fu"><a href="../reference/theme_ggdist.html">theme_ggdist</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orangered"</span><span class="op">)</span>,</span>
<span>    axis.line.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orangered"</span><span class="op">)</span>,</span>
<span>    axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orangered"</span><span class="op">)</span>,</span>
<span>    axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"orangered"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_slabs_with_scales</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">subguide</span> <span class="op">=</span> <span class="va">subguide_orangered</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1.9</span>, <span class="fl">2</span>,<span class="fl">2.9</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"orangered"</span>, linetype <span class="op">=</span> <span class="st">"11"</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/geom_slab.html">geom_slab</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>thickness <span class="op">=</span> <span class="va">h</span><span class="op">)</span>,</span>
<span>      subguide <span class="op">=</span> <span class="va">subguide</span>,</span>
<span>      alpha <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"gray25"</span>,</span>
<span>      <span class="va">...</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_label</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span>,</span>
<span>      data <span class="op">=</span> <span class="va">df_group</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"gray25"</span>,</span>
<span>      alpha <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>      vjust <span class="op">=</span> <span class="fl">0</span>,</span>
<span>      show.legend <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>add <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">panel</span><span class="op">)</span>, labeller <span class="op">=</span> <span class="st">"label_both"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>      plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="fl">50</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span><span class="op">)</span>,</span>
<span>      panel.spacing.x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">40</span>, <span class="st">"pt"</span><span class="op">)</span>,</span>
<span>      legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray70"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">plot_slabs_with_scales</span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab(normalize = 'all')"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"default normalization settings"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/normalize_all-1.png" width="648"></p>
<p>Notice how the minimum and maximum value on each
<code>thickness</code> subscale is the same: it is the maximum thickness
value over all slabs; i.e.Â the height of the tallest slab in the data.
This is a conservative default setting that ensures all slabs in the
same geometry are scaled together.</p>
</div>
<div class="section level3">
<h3 id="normalize-panels">
<code>normalize = "panels"</code><a class="anchor" aria-label="anchor" href="#normalize-panels"></a>
</h3>
<p>Sometimes you may have separate panels within which you want to scale
all slabs together. You can do this using
<code>normalize = "panels"</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_slabs_with_scales</span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"panels"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab(normalize = 'panels')"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"scales to the maximum height within each panel"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/normalize_panels-1.png" width="648"></p>
<p>Notice how the <code>thickness</code> scales <em>inside</em> a given
panel are the same: panel <code>"e"</code> has a maximum
<code>thickness</code> of <code>2</code> (the height of slab
<code>2</code>) and panel <code>"f"</code> has a maximum
<code>thickness</code> of <code>1.25</code> (the height of slab
<code>4</code>). All other slabs within the same panel are scaled
accordingly.</p>
</div>
<div class="section level3">
<h3 id="normalize-xy">
<code>normalize = "xy"</code><a class="anchor" aria-label="anchor" href="#normalize-xy"></a>
</h3>
<p>Often it is useful to scale slabs on the same <code>x</code> or
<code>y</code> position together, where whether we scale within
<code>x</code> or <code>y</code> is determined by the
<code>orientation</code> of the geometry. You can do this using
<code>normalize = "xy"</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_slabs_with_scales</span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"xy"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab(normalize = 'xy')"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"scales to the maximum height within each x/y position within each panel"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/normalize_xy-1.png" width="648"></p>
<p>In this plot, because <code>orientation = "horizontal"</code>,
<code>normalize = "xy"</code> scales within each unique <em>y</em>
position; i.e.Â the values <code>"a"</code> and <code>"b"</code>.
Normalization settings are hierarchical, so it uses the maximum
<code>thickness</code> value within each <em>y</em> position within each
panel. Thus:</p>
<ul>
<li>slab <code>2</code> is scaled to its maximum of
<code>2.0</code>;</li>
<li>slabs <code>1</code>, <code>3a</code>, and <code>3b</code> are
scaled to their maximum of <code>1.33</code> (the height of slab
<code>3a</code>);</li>
<li>slab <code>4</code> is scaled to its maximum of <code>1.25</code>;
and</li>
<li>slab <code>5</code> is scaled to its maximum of
<code>0.5</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="normalize-groups">
<code>normalize = "groups"</code><a class="anchor" aria-label="anchor" href="#normalize-groups"></a>
</h3>
<p>Finally, it can be useful to scale all slabs according to their
maximum height. You can do this using
<code>normalize = "groups"</code>.</p>
<p>Notably, if you have multiple groups at the same x/y position, you
cannot combine <code>normalize = "groups"</code> with any thickness
subguide except <code>"none"</code>, because the thickness subguides on
each y value will not be unique. Hence this error:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_slabs_with_scales</span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"groups"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `geom_slab()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> Problem while converting geom to grob.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">â„¹</span> Error occurred in the 2nd layer.</span></span>
<span><span class="co">## <span style="font-weight: bold;">Caused by error in `fun()`:</span></span></span>
<span><span class="co">## <span style="color: #BBBB00;">!</span> Cannot draw a subguide for the thickness axis when multiple slabs with different</span></span>
<span><span class="co">##   normalizations are drawn on the same axis.</span></span></code></pre>
<p>Thus for this example we will have to omit the <code>thickness</code>
subguide:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_slabs_with_scales</span><span class="op">(</span>normalize <span class="op">=</span> <span class="st">"groups"</span>, subguide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab(normalize = 'groups')"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"scales to the maximum height within each group within each x/y position within each panel"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/normalize_groups-1.png" width="648"></p>
<p>Notice how all groups are scaled to have their maximum height at the
maximum thickness value; thus, slab <code>1</code> and slab
<code>3b</code> are no longer the same height.</p>
<p>Why is slab <code>3b</code> not scaled to touch the maximum
<code>thickness</code>? <code><a href="../reference/geom_slab.html">geom_slab()</a></code> technically only
considers values in different groups to be in different slabs, so slab
<code>3a</code> and <code>3b</code> are actually parts of the same slab,
as indicated by the unbroken outline they are drawn with.</p>
</div>
</div>
<div class="section level2">
<h2 id="sharing-thickness-scales-across-multiple-geometries">Sharing <code>thickness</code> scales across multiple
geometries<a class="anchor" aria-label="anchor" href="#sharing-thickness-scales-across-multiple-geometries"></a>
</h2>
<p>Sometimes we want to use different geometries to plot slabs on the
same scale. This often happens when plotting priors and posteriors, but
may happen in other cases as well.</p>
<p>Here is a prior and posterior plotted using separate geometries, with
their thickness scales annotated:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_prior_post</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  posterior <span class="op">=</span> <span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">prior_post_plot</span> <span class="op">=</span> <span class="va">df_prior_post</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_slab.html">stat_slab</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xdist <span class="op">=</span> <span class="va">posterior</span><span class="op">)</span>,</span>
<span>    subguide <span class="op">=</span> <span class="fu"><a href="../reference/subguide_axis.html">subguide_inside</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"posterior thickness"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_slab.html">stat_slab</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xdist <span class="op">=</span> <span class="va">prior</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"orangered"</span>,</span>
<span>    fill <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    subguide <span class="op">=</span> <span class="fu">subguide_orangered</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"prior thickness"</span>, just <span class="op">=</span> <span class="fl">0</span>, label_side <span class="op">=</span> <span class="st">"inside"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray70"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prior_post_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"two different slab geometries"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"thickness scales are not shared across geometries by default"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/prior_post-1.png" width="648"></p>
<p>Notice how the two geometries have different <code>thickness</code>
scales. If we add <code><a href="../reference/scale_thickness.html">scale_thickness_shared()</a></code> to the plot,
they will be given the same scale:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prior_post_plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/scale_thickness.html">scale_thickness_shared</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"two different slab geometries"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using scale_thickness_shared() to share thickness scale across geometries"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/prior_post_shared-1.png" width="648"></p>
<p><code>scaled_thickness_shared()</code> works by scaling values and
then tagging them with a special <code><a href="../reference/thickness.html">thickness()</a></code> datatype. That
type carries information about the original scale limits (used to draw
subguides), and also tells the slab geometries that they should not do
any further normalization. Thus, when you use
<code><a href="../reference/scale_thickness.html">scale_thickness_shared()</a></code>, the <code>normalize</code>
parameter on each slab geometry is ignored.</p>
</div>
<div class="section level2">
<h2 id="spacing-slabs-with-height-and-scale">Spacing slabs with <code>height</code> and <code>scale</code><a class="anchor" aria-label="anchor" href="#spacing-slabs-with-height-and-scale"></a>
</h2>
<p>The <code>thickness</code> aesthetic is drawn within a subset of the
bounding box of <code><a href="../reference/geom_slab.html">geom_slab()</a></code> determined by the
<code>scale</code> aesthetic, which defaults to <code>0.9</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"pt"</span><span class="op">)</span>, ends <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scale_plot</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">scale</span> <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>d <span class="op">=</span> <span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xdist <span class="op">=</span> <span class="va">d</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span></span>
<span>      yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span> <span class="op">+</span> <span class="va">scale</span>, <span class="fl">2</span>, <span class="fl">2</span> <span class="op">+</span> <span class="va">scale</span><span class="op">)</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"orangered"</span>, linetype <span class="op">=</span> <span class="st">"11"</span>, linewidth <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/stat_slab.html">stat_slab</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="va">scale</span>, subguide <span class="op">=</span> <span class="va">subguide_orangered</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"segment"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>, xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, yend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,</span>
<span>      arrow <span class="op">=</span> <span class="va">cap</span>, linewidth <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"label"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="st">"height = 1"</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>, color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"segment"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, yend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">scale</span>,</span>
<span>      arrow <span class="op">=</span> <span class="va">cap</span>, linewidth <span class="op">=</span> <span class="fl">0.75</span>, color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"label"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">scale</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>      label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"scale ="</span>, <span class="va">scale</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>, color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>add <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>      plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="fl">40</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span><span class="op">)</span>,</span>
<span>      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray70"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">scale_plot</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab()"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using default height = 1 and scale = 0.9"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/default_height_scale-1.png" width="648"></p>
<p>This allows us to adjust the spacing between slabs using
<code>scale</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">scale_plot</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">0.65</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab()"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using scale = 0.65 to increase spacing between slabs"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/scale_reduced-1.png" width="648"></p>
<div class="section level3">
<h3 id="spacing-dodged-slabs">Spacing dodged slabs<a class="anchor" aria-label="anchor" href="#spacing-dodged-slabs"></a>
</h3>
<p><code>height</code> and <code>scale</code> are particularly useful
when combined with dodging, as modifying <code>height</code> allows you
to change the spacing <strong>between</strong> sets of slabs with the
same y value, and modifying <code>scale</code> allows you to change the
spacing <strong>within</strong> sets:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dodged_scale_plot</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">height</span> <span class="op">=</span> <span class="fl">1</span>, <span class="va">scale</span> <span class="op">=</span> <span class="fl">0.9</span>, <span class="va">add</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">baselines</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span> <span class="op">-</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    d <span class="op">=</span> <span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"b"</span><span class="op">)</span>,</span>
<span>    group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>,<span class="st">"e"</span>,<span class="st">"d"</span>,<span class="st">"e"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xdist <span class="op">=</span> <span class="va">d</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>, color <span class="op">=</span> <span class="st">"gray85"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span></span>
<span>      yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">baselines</span>, <span class="va">baselines</span> <span class="op">+</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span><span class="op">*</span><span class="va">scale</span><span class="op">)</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"orangered"</span>,</span>
<span>      linetype <span class="op">=</span> <span class="st">"11"</span>,</span>
<span>      linewidth <span class="op">=</span> <span class="fl">0.5</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/stat_slab.html">stat_slab</a></span><span class="op">(</span></span>
<span>      height <span class="op">=</span> <span class="va">height</span>, scale <span class="op">=</span> <span class="va">scale</span>,</span>
<span>      subguide <span class="op">=</span> <span class="va">subguide_orangered</span>, position <span class="op">=</span> <span class="st">"dodgejust"</span>,</span>
<span>      alpha <span class="op">=</span> <span class="fl">0.75</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"segment"</span>,</span>
<span>      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>, xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">-</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>, yend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>      arrow <span class="op">=</span> <span class="va">cap</span>, color <span class="op">=</span> <span class="st">"gray25"</span>, linewidth <span class="op">=</span> <span class="fl">0.75</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"label"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>,<span class="op">-</span><span class="fl">4</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>      label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"height ="</span>, <span class="va">height</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>,</span>
<span>      color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"segment"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, xend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="va">baselines</span>, yend <span class="op">=</span> <span class="va">baselines</span> <span class="op">+</span> <span class="va">scale</span> <span class="op">*</span> <span class="va">height</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>      arrow <span class="op">=</span> <span class="va">cap</span>, color <span class="op">=</span> <span class="st">"gray25"</span>, linewidth <span class="op">=</span> <span class="fl">0.75</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"label"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">2</span>,<span class="op">-</span><span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>,</span>
<span>      y <span class="op">=</span> <span class="va">baselines</span> <span class="op">+</span> <span class="va">scale</span><span class="op">*</span><span class="va">height</span><span class="op">/</span><span class="fl">4</span>, label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"scale ="</span>, <span class="va">scale</span><span class="op">)</span>,</span>
<span>      hjust <span class="op">=</span> <span class="op">-</span><span class="fl">0.05</span>, color <span class="op">=</span> <span class="st">"gray25"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>add <span class="op">=</span> <span class="va">add</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>      plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">5.5</span>, <span class="fl">40</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span><span class="op">)</span>,</span>
<span>      panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray70"</span><span class="op">)</span>,</span>
<span>      legend.position <span class="op">=</span> <span class="st">"bottom"</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>clip <span class="op">=</span> <span class="st">"off"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">dodged_scale_plot</span><span class="op">(</span>height <span class="op">=</span> <span class="fl">1</span>, scale <span class="op">=</span> <span class="fl">0.9</span>, add <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'geom_slab(position = "dodgejust")'</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using default height = 1 and scale = 0.9"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/default_dodge-1.png" width="672"></p>
<p>If we decrease <code>height</code>, it increases the space
<strong>between</strong> sets of slabs with the same <em>y</em>
value:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dodged_scale_plot</span><span class="op">(</span>height <span class="op">=</span> <span class="fl">0.8</span>, scale <span class="op">=</span> <span class="fl">0.9</span>, add <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'geom_slab(position = "dodgejust")'</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using height = 0.8 to increase the space between sets"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/dodge_height_reduced-1.png" width="672"></p>
<p>And if we decrease <code>scale</code>, it increases the spacing
<strong>within</strong> sets of slabs with the same <em>y</em>
value:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dodged_scale_plot</span><span class="op">(</span>height <span class="op">=</span> <span class="fl">0.8</span>, scale <span class="op">=</span> <span class="fl">0.65</span>, add <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">'geom_slab(position = "dodgejust")'</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using height = 0.8 and scale = 0.65"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/dodge_height_scale_reduced-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="ridgeline-plots-with-height-1">Ridgeline plots with <code>height &gt; 1</code><a class="anchor" aria-label="anchor" href="#ridgeline-plots-with-height-1"></a>
</h3>
<p>Finally, <code>height</code> can also be greater than <code>1</code>,
which can be used to create overlapping slabs, as in so-called ridgeline
plots:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  d <span class="op">=</span> <span class="fu"><a href="https://pkg.mitchelloharawild.com/distributional/reference/dist_normal.html" class="external-link">dist_normal</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">1</span><span class="op">/</span><span class="fl">4</span>, <span class="fl">1</span> <span class="op">+</span> <span class="fl">10</span><span class="op">:</span><span class="fl">1</span><span class="op">/</span><span class="fl">15</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xdist <span class="op">=</span> <span class="va">d</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/stat_slab.html">stat_slab</a></span><span class="op">(</span>height <span class="op">=</span> <span class="fl">3</span>, color <span class="op">=</span> <span class="st">"gray25"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"geom_slab()"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"using height &gt; 1 to create ridgeline plots"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="thickness_files/figure-html/ridgeline-1.png" width="648"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.mjskay.com" class="external-link">Matthew Kay</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
